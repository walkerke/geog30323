install.packages("revealjs")
library(tidycensus)
vt <- get_acs(geography = "county subdivision",
variables = c(Medianrent = "DP04_0005"),
state = "NH",
county = "grafton")
vt
vt <- get_acs(geography = "county subdivision",
variables = c(Medianrent = "DP04_0005"),
state = "NH",
county = "grafton", year = 2018)
vt
x <- load_variables(2018, "acs5/profile", cache = TRUE)
View(x)
vt <- get_acs(geography = "county subdivision",
variables = c(Medianrent = "DP04_0005"),
state = "NH",
county = "grafton", year = 2018, show_call = TRUE)
vt
g <- get_acs(geography = "county subdivision", state = "NH", county = "Grafton", variables = "B01003_001", year = 2018, show_call = TRUE)
View(g)
setwd("~/teaching/prep")
library(sf)
library(tidyverse)
library(tidycensus)
districts <- st_read("data/POL_COUNCIL_DISTRICTS.shp")
library(mapview)
mapview(districts)
library(crsuggest)
bgs <- get_acs(geography = "block group",
variables = "B01003_001",
state = "TX",
county = c("Tarrant", "Parker", "Wise", "Denton"),
geometry = TRUE)
options(tigris_use_cache = TRUE)
suggest_top_crs(bgs)
st_crs(districts)
bgs <- get_acs(geography = "block group",
variables = "B01003_001",
state = "TX",
county = c("Tarrant", "Parker", "Wise", "Denton"),
geometry = TRUE) %>%
st_transform(st_crs(districts))
library(areal)
?aw_interpolate
bgs <- get_acs(geography = "block group",
variables = "B01003_001",
state = "TX",
county = c("Tarrant", "Parker", "Wise", "Denton"),
geometry = TRUE) %>%
st_transform(st_crs(districts)) %>%
select(GEOID, estimate)
names(districts)
glimpse(districts)
aw_output <- aw_interpolate(districts,
tid = "NAME",
source = bgs,
sid = "GEOID",
output = "tibble",
extensive = "estimate")
aw_output <- aw_interpolate(districts,
tid = "NAME",
source = bgs,
sid = "GEOID",
output = "tibble",
extensive = "estimate",
weight = "sum")
districts <- st_read("data/POL_COUNCIL_DISTRICTS.shp") %>%
st_buffer(0)
bgs <- get_acs(geography = "block group",
variables = "B01003_001",
state = "TX",
county = c("Tarrant", "Parker", "Wise", "Denton"),
geometry = TRUE) %>%
st_transform(st_crs(districts)) %>%
select(GEOID, estimate) %>%
st_buffer(0)
aw_output <- aw_interpolate(districts,
tid = "NAME",
source = bgs,
sid = "GEOID",
output = "tibble",
extensive = "estimate",
weight = "sum")
View(aw_output)
sum(aw_output$estimate)
aw_output <- aw_interpolate(districts,
tid = "NAME",
source = bgs,
sid = "GEOID",
output = "tibble",
intensive = "estimate",
weight = "sum")
View(aw_output)
mapview(bgs) + mapview(districts, col = "red")
mapview(bgs) + mapview(districts, col.regions = "red")
districts2 <- districts %>%
st_join(bgs) %>%
group_by(NAME) %>%
summarize(total = sum(estimate, na.rm = TRUE))
View(districts)
districts2 <- districts %>%
st_join(bgs) %>%
group_by(NAME) %>%
summarize(total = sum(estimate, na.rm = TRUE)) %>%
st_drop_geometry()
View(districts2)
sum(districts2$total)
